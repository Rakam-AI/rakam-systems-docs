"use strict";(self.webpackChunkrakam_systems_docs_portal=self.webpackChunkrakam_systems_docs_portal||[]).push([[9041],{3222(e,n,s){s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"ai-components/agents/index","title":"Agents","description":"The agent package of Rakam Systems providing AI agent implementations powered by Pydantic AI.","source":"@site/docs/ai-components/agents/index.md","sourceDirName":"ai-components/agents","slug":"/ai-components/agents/","permalink":"/rakam-systems-docs/ai-components/agents/","draft":false,"unlisted":false,"editUrl":"https://github.com/Rakam-AI/rakam_systems/edit/main/docs/docs/ai-components/agents/index.md","tags":[],"version":"current","lastUpdatedBy":"Mohamed Bashar Touil","lastUpdatedAt":1771249661000,"frontMatter":{"title":"Agents"},"sidebar":"docsSidebar","previous":{"title":"Rakam\'s Development Guide","permalink":"/rakam-systems-docs/getting-started/development_guide"},"next":{"title":"Agents","permalink":"/rakam-systems-docs/ai-components/agents/"}}');var i=s(4848),l=s(8453);const a={title:"Agents"},o="Rakam Systems Agent",r={},c=[{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"\ud83c\udfaf Configuration Convenience",id:"-configuration-convenience",level:3},{value:"Installation",id:"installation",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Using BaseAgent (Pydantic AI-powered)",id:"using-baseagent-pydantic-ai-powered",level:3},{value:"Core Components",id:"core-components",level:2},{value:"AgentComponent",id:"agentcomponent",level:3},{value:"BaseAgent",id:"baseagent",level:3},{value:"Tool",id:"tool",level:3},{value:"ModelSettings",id:"modelsettings",level:3},{value:"Advanced Usage",id:"advanced-usage",level:2},{value:"Parallel vs Sequential Tool Calls",id:"parallel-vs-sequential-tool-calls",level:3},{value:"Using Dependencies",id:"using-dependencies",level:3},{value:"Streaming Responses",id:"streaming-responses",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"AgentComponent",id:"agentcomponent-1",level:3},{value:"Tool",id:"tool-1",level:3},{value:"ModelSettings",id:"modelsettings-1",level:3},{value:"Examples",id:"examples",level:2},{value:"Package Structure",id:"package-structure",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Migration Guide",id:"migration-guide",level:2},{value:"Using BaseAgent",id:"using-baseagent",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"ImportError: pydantic_ai not installed",id:"importerror-pydantic_ai-not-installed",level:3},{value:"Tool not being called",id:"tool-not-being-called",level:3},{value:"Performance issues",id:"performance-issues",level:3},{value:"Contributing",id:"contributing",level:2},{value:"License",id:"license",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"rakam-systems-agent",children:"Rakam Systems Agent"})}),"\n",(0,i.jsx)(n.p,{children:"The agent package of Rakam Systems providing AI agent implementations powered by Pydantic AI."}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"rakam-systems-agent"})," provides flexible AI agents with tool integration, chat history, and LLM gateway abstractions. This package depends on ",(0,i.jsx)(n.code,{children:"rakam-systems-core"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Configuration-First Design"}),": Change agents without code changes - just update YAML files"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Async/Sync Support"}),": Full support for both synchronous and asynchronous agent operations"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tool Integration"}),": Easy tool definition and integration using the ",(0,i.jsx)(n.code,{children:"Tool.from_schema"})," pattern"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Model Settings"}),": Control model behavior including parallel tool calls, temperature, and max tokens"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Pydantic AI Powered"}),": Built on top of Pydantic AI library"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Streaming Support"}),": Both sync and async streaming interfaces"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Chat History"}),": Multiple backends (JSON, SQLite, PostgreSQL)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"LLM Gateway"}),": Unified interface for OpenAI and Mistral AI"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"-configuration-convenience",children:"\ud83c\udfaf Configuration Convenience"}),"\n",(0,i.jsx)(n.p,{children:"The agent package supports comprehensive YAML configuration, allowing you to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Switch LLM models"})," without changing code (GPT-4 \u2192 GPT-4o-mini \u2192 Claude)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tune parameters"})," instantly (temperature, max tokens, parallel tools)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Modify prompts"})," without redeployment"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Add/remove tools"})," by editing config files"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Enable/disable tracking"})," via configuration"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use different configs"})," for different environments"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Example"}),": Switch from GPT-4o to GPT-4o-mini by changing one line in your YAML - no code changes, no redeployment needed!"]}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Requires core package\npip install -e ./rakam-systems-core\n\n# Install agent package\npip install -e ./rakam-systems-agent\n"})}),"\n",(0,i.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,i.jsx)(n.h3,{id:"using-baseagent-pydantic-ai-powered",children:"Using BaseAgent (Pydantic AI-powered)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import asyncio\nfrom rakam_systems_agent import BaseAgent\nfrom rakam_systems_core.ai_core.interfaces import ModelSettings\nfrom rakam_systems_core.ai_core.interfaces.tool import ToolComponent as Tool\n\n# Define a tool function\nasync def get_weather(city: str) -> dict:\n    \"\"\"Get weather information for a city\"\"\"\n    # Your implementation here\n    return {\"city\": city, \"temperature\": 72, \"condition\": \"sunny\"}\n\n# Create an agent with tools\nagent = BaseAgent(\n    name=\"weather_agent\",\n    model=\"openai:gpt-4o\",\n    system_prompt=\"You are a helpful weather assistant.\",\n    tools=[\n        Tool.from_schema(\n            function=get_weather,\n            name='get_weather',\n            description='Get weather information for a city',\n            json_schema={\n                'type': 'object',\n                'properties': {\n                    'city': {'type': 'string', 'description': 'The city name'},\n                },\n                'required': ['city'],\n                'additionalProperties': False,\n            },\n            takes_ctx=False,\n        ),\n    ],\n)\n\n# Run the agent\nasync def main():\n    result = await agent.arun(\n        \"What's the weather in San Francisco?\",\n        model_settings=ModelSettings(parallel_tool_calls=True),\n    )\n    print(result.output_text)\n\nasyncio.run(main())\n"})}),"\n",(0,i.jsx)(n.h2,{id:"core-components",children:"Core Components"}),"\n",(0,i.jsx)(n.h3,{id:"agentcomponent",children:"AgentComponent"}),"\n",(0,i.jsx)(n.p,{children:"The base abstract class for all agents. Provides:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"run()"})," / ",(0,i.jsx)(n.code,{children:"arun()"}),": Execute the agent synchronously or asynchronously"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"stream()"})," / ",(0,i.jsx)(n.code,{children:"astream()"}),": Stream responses"]}),"\n",(0,i.jsx)(n.li,{children:"Support for tools, model settings, and dependencies"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"baseagent",children:"BaseAgent"}),"\n",(0,i.jsx)(n.p,{children:"The core agent implementation powered by Pydantic AI. This is the primary agent class in our system. Features:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Direct integration with Pydantic AI's Agent"}),"\n",(0,i.jsx)(n.li,{children:"Full support for parallel tool calls"}),"\n",(0,i.jsx)(n.li,{children:"Automatic conversion between our interfaces and Pydantic AI's"}),"\n",(0,i.jsx)(n.li,{children:"Support for both traditional tool lists and ToolRegistry/ToolInvoker system"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"tool",children:"Tool"}),"\n",(0,i.jsxs)(n.p,{children:["Wrapper for tool functions compatible with Pydantic AI's ",(0,i.jsx)(n.code,{children:"Tool.from_schema"})," pattern:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"Tool.from_schema(\n    function=my_function,\n    name='my_function',\n    description='What this function does',\n    json_schema={\n        'type': 'object',\n        'properties': {...},\n        'required': [...],\n    },\n    takes_ctx=False,\n)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"modelsettings",children:"ModelSettings"}),"\n",(0,i.jsx)(n.p,{children:"Configure model behavior:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"ModelSettings(\n    parallel_tool_calls=True,  # Enable parallel tool execution\n    temperature=0.7,           # Control randomness\n    max_tokens=1000,           # Limit response length\n)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"advanced-usage",children:"Advanced Usage"}),"\n",(0,i.jsx)(n.h3,{id:"parallel-vs-sequential-tool-calls",children:"Parallel vs Sequential Tool Calls"}),"\n",(0,i.jsx)(n.p,{children:"Control whether tools are called in parallel or sequentially:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Parallel (faster for independent tools)\nresult = await agent.arun(\n    "Get weather for NYC and LA",\n    model_settings=ModelSettings(parallel_tool_calls=True),\n)\n\n# Sequential (for dependent operations)\nresult = await agent.arun(\n    "Get weather for NYC and LA",\n    model_settings=ModelSettings(parallel_tool_calls=False),\n)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"using-dependencies",children:"Using Dependencies"}),"\n",(0,i.jsx)(n.p,{children:"Pass context/dependencies to your agent:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'class Deps:\n    def __init__(self, user_id: str):\n        self.user_id = user_id\n\nagent = BaseAgent(\n    deps_type=Deps,\n    # ...\n)\n\nresult = await agent.arun(\n    "Process this",\n    deps=Deps(user_id="123"),\n)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"streaming-responses",children:"Streaming Responses"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"async for chunk in agent.astream(\"Tell me a story\"):\n    print(chunk, end='', flush=True)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,i.jsx)(n.h3,{id:"agentcomponent-1",children:"AgentComponent"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"class AgentComponent(BaseComponent):\n    def __init__(\n        self,\n        name: str,\n        config: Optional[Dict[str, Any]] = None,\n        model: Optional[str] = None,\n        deps_type: Optional[Type[Any]] = None,\n        system_prompt: Optional[str] = None,\n        tools: Optional[List[Any]] = None,\n    )\n\n    def run(\n        self,\n        input_data: Union[str, AgentInput],\n        deps: Optional[Any] = None,\n        model_settings: Optional[ModelSettings] = None\n    ) -> AgentOutput\n\n    async def arun(\n        self,\n        input_data: Union[str, AgentInput],\n        deps: Optional[Any] = None,\n        model_settings: Optional[ModelSettings] = None\n    ) -> AgentOutput\n"})}),"\n",(0,i.jsx)(n.h3,{id:"tool-1",children:"Tool"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'class Tool:\n    @classmethod\n    def from_schema(\n        cls,\n        function: Callable[..., Any],\n        name: str,\n        description: str,\n        json_schema: Dict[str, Any],\n        takes_ctx: bool = False,\n    ) -> "Tool"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"modelsettings-1",children:"ModelSettings"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"class ModelSettings:\n    def __init__(\n        self,\n        parallel_tool_calls: bool = True,\n        temperature: Optional[float] = None,\n        max_tokens: Optional[int] = None,\n        **kwargs: Any\n    )\n"})}),"\n",(0,i.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["See the ",(0,i.jsx)(n.code,{children:"examples/ai_agents_examples/"})," directory in the main repository for complete examples demonstrating:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Multiple tool definitions"}),"\n",(0,i.jsx)(n.li,{children:"Parallel vs sequential tool calls"}),"\n",(0,i.jsx)(n.li,{children:"Performance comparisons"}),"\n",(0,i.jsx)(n.li,{children:"Complex multi-tool workflows"}),"\n",(0,i.jsx)(n.li,{children:"Chat history integration"}),"\n",(0,i.jsx)(n.li,{children:"RAG systems"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"package-structure",children:"Package Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"rakam-systems-agent/\n\u251c\u2500\u2500 src/rakam_system_agent/\n\u2502   \u251c\u2500\u2500 components/\n\u2502   \u2502   \u251c\u2500\u2500 base_agent.py         # BaseAgent (Pydantic AI-powered)\n\u2502   \u2502   \u251c\u2500\u2500 llm_gateway/          # LLM provider gateways\n\u2502   \u2502   \u251c\u2500\u2500 chat_history/         # Chat history backends\n\u2502   \u2502   \u251c\u2500\u2500 tools/                # Built-in tools\n\u2502   \u2502   \u2514\u2500\u2500 __init__.py           # Exports\n\u2502   \u2514\u2500\u2500 server/                   # MCP server\n\u2514\u2500\u2500 pyproject.toml\n"})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use async when possible"}),": Async operations are more efficient, especially with tools"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Enable parallel tool calls"}),": For independent operations, parallel execution is much faster"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Provide clear tool descriptions"}),": Better descriptions help the LLM use tools correctly"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use type hints"}),": JSON schemas should match your function signatures"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Handle errors gracefully"}),": Tools should catch and return meaningful errors"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"migration-guide",children:"Migration Guide"}),"\n",(0,i.jsx)(n.h3,{id:"using-baseagent",children:"Using BaseAgent"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"BaseAgent"})," is the core Pydantic AI-powered agent implementation in this framework."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from rakam_systems_agent import BaseAgent\n\nagent = BaseAgent(\n    name="agent",\n    model="openai:gpt-4o",\n    system_prompt="You are a helpful assistant."\n)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"importerror-pydantic_ai-not-installed",children:"ImportError: pydantic_ai not installed"}),"\n",(0,i.jsx)(n.p,{children:"Install Pydantic AI:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pip install pydantic_ai\n"})}),"\n",(0,i.jsx)(n.h3,{id:"tool-not-being-called",children:"Tool not being called"}),"\n",(0,i.jsx)(n.p,{children:"Check:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Tool description is clear and relevant"}),"\n",(0,i.jsx)(n.li,{children:"JSON schema matches function signature"}),"\n",(0,i.jsx)(n.li,{children:"System prompt doesn't contradict tool usage"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"performance-issues",children:"Performance issues"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Enable ",(0,i.jsx)(n.code,{children:"parallel_tool_calls=True"})," for independent operations"]}),"\n",(0,i.jsx)(n.li,{children:"Use async functions for I/O-bound operations"}),"\n",(0,i.jsx)(n.li,{children:"Consider caching tool results when appropriate"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"contributing",children:"Contributing"}),"\n",(0,i.jsx)(n.p,{children:"When adding new agent types:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Inherit from ",(0,i.jsx)(n.code,{children:"BaseAgent"})]}),"\n",(0,i.jsxs)(n.li,{children:["Implement ",(0,i.jsx)(n.code,{children:"ainfer()"})," for async or ",(0,i.jsx)(n.code,{children:"infer()"})," for sync"]}),"\n",(0,i.jsxs)(n.li,{children:["Add tests in ",(0,i.jsx)(n.code,{children:"tests/"})]}),"\n",(0,i.jsx)(n.li,{children:"Update this README with examples"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"license",children:"License"}),"\n",(0,i.jsx)(n.p,{children:"See main project LICENSE file."})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>a,x:()=>o});var t=s(6540);const i={},l=t.createContext(i);function a(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);