"use strict";(self.webpackChunkrakam_systems_docs_portal=self.webpackChunkrakam_systems_docs_portal||[]).push([[2346],{5440(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"user-guide","title":"User Guide","description":"Installation","source":"@site/docs/user-guide.md","sourceDirName":".","slug":"/user-guide","permalink":"/rakam-systems-docs/user-guide","draft":false,"unlisted":false,"editUrl":"https://github.com/Rakam-AI/rakam_systems/edit/main/docs/docs/user-guide.md","tags":[],"version":"current","lastUpdatedBy":"Mohamed Bashar Touil","lastUpdatedAt":1771368861000,"frontMatter":{"title":"User Guide"},"sidebar":"docsSidebar","previous":{"title":"Getting Started","permalink":"/rakam-systems-docs/getting-started"},"next":{"title":"Developer Guide","permalink":"/rakam-systems-docs/developer-guide"}}');var t=s(4848),i=s(8453);const o={title:"User Guide"},a=void 0,l={},c=[{value:"Installation",id:"installation",level:2},{value:"Option 1: Install All Packages",id:"option-1-install-all-packages",level:3},{value:"Option 2: Install Specific Packages",id:"option-2-install-specific-packages",level:3},{value:"Packages Deps",id:"packages-deps",level:3},{value:"Core Package (Required)",id:"core-package-required",level:4},{value:"Agent Package",id:"agent-package",level:4},{value:"Vectorstore Package",id:"vectorstore-package",level:4},{value:"Environment Setup",id:"environment-setup",level:2},{value:"Start the Evaluation Service (required for evaluation)",id:"start-the-evaluation-service-required-for-evaluation",level:3},{value:"API Keys",id:"api-keys",level:3},{value:"PostgreSQL with pgvector",id:"postgresql-with-pgvector",level:3},{value:"Option 1: Docker (Recommended)",id:"option-1-docker-recommended",level:4},{value:"Option 2: Docker Compose",id:"option-2-docker-compose",level:4},{value:"Environment Variables for PostgreSQL",id:"environment-variables-for-postgresql",level:4},{value:"Django Configuration",id:"django-configuration",level:3},{value:"Agents",id:"agents",level:2},{value:"Basic Agent",id:"basic-agent",level:3},{value:"With Streaming",id:"with-streaming",level:3},{value:"With Custom Settings",id:"with-custom-settings",level:3},{value:"With Tools",id:"with-tools",level:3},{value:"Structured Output",id:"structured-output",level:3},{value:"Chat History",id:"chat-history",level:3},{value:"Vector Store",id:"vector-store",level:2},{value:"FAISS (in-memory, for development)",id:"faiss-in-memory-for-development",level:3},{value:"PostgreSQL (production)",id:"postgresql-production",level:3},{value:"RAG Pipeline",id:"rag-pipeline",level:2},{value:"Agent with Configuration (YAML)",id:"agent-with-configuration-yaml",level:2},{value:"Write Evaluation Function",id:"write-evaluation-function",level:2},{value:"Run Your Evaluation",id:"run-your-evaluation",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"1. ModuleNotFoundError",id:"1-modulenotfounderror",level:4},{value:"2. Missing Optional Dependencies",id:"2-missing-optional-dependencies",level:4},{value:"3. Django Not Configured",id:"3-django-not-configured",level:4},{value:"4. PyTorch Installation Issues",id:"4-pytorch-installation-issues",level:4},{value:"5. FAISS GPU Support",id:"5-faiss-gpu-support",level:4},{value:"6. libmagic Not Found",id:"6-libmagic-not-found",level:4},{value:"7. PostgreSQL Connection Refused",id:"7-postgresql-connection-refused",level:4},{value:"Verification",id:"verification",level:3},{value:"Verify Core Installation",id:"verify-core-installation",level:4},{value:"Verify AI Agents",id:"verify-ai-agents",level:4},{value:"Verify AI Vectorstore",id:"verify-ai-vectorstore",level:4},{value:"Verify LLM Gateway",id:"verify-llm-gateway",level:4},{value:"Getting Help",id:"getting-help",level:3}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,t.jsx)(n.h3,{id:"option-1-install-all-packages",children:"Option 1: Install All Packages"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Install all  components\npip install  rakam-systems==0.2.5rc10\n"})}),"\n",(0,t.jsx)(n.h3,{id:"option-2-install-specific-packages",children:"Option 2: Install Specific Packages"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Core only (required by others)\npip install  rakam-systems-core\n\n# Agent package (includes core as dependency)\npip install rakam-systems-agent[all]==0.1.1rc12\n\n# Vectorstore package (includes core as dependency)\npip install rakam-systems-agent[all]==0.1.1rc11\n\n# Agent + Vectorstore (for RAG applications)\npip install rakam-systems-agent[all]==0.1.1rc12 rakam-systems-agent[all]==0.1.1rc11\n"})}),"\n",(0,t.jsx)(n.h3,{id:"packages-deps",children:"Packages Deps"}),"\n",(0,t.jsx)(n.p,{children:"Rakam Systems uses a modular architecture with three independent packages. Install only what you need:"}),"\n",(0,t.jsx)(n.h4,{id:"core-package-required",children:"Core Package (Required)"}),"\n",(0,t.jsx)(n.p,{children:"The core package provides foundational interfaces and utilities. It's required by both agent and vectorstore packages."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pip install rakam-systems-core\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Includes:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"pydantic"})," - Data validation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"pyyaml"})," - YAML configuration"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"python-dotenv"})," - Environment variables"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"colorlog"})," - Logging"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"requests"})," - HTTP client"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"agent-package",children:"Agent Package"}),"\n",(0,t.jsx)(n.p,{children:"The agent package provides AI agent implementations powered by Pydantic AI."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pip install rakam-systems-agent\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Minimum Specs:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"RAM"}),": 4 GB minimum"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Network"}),": Internet access for LLM API calls"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"API Keys"}),": OpenAI and/or Mistral API keys"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Includes:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"All core package dependencies"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"pydantic-ai"})," - Agent framework"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"mistralai"})," - Mistral AI provider"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"openai"})," - OpenAI provider"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"tiktoken"})," - Token counting"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Building AI agents with tools"}),"\n",(0,t.jsx)(n.li,{children:"Multi-step reasoning systems"}),"\n",(0,t.jsx)(n.li,{children:"Conversational AI"}),"\n",(0,t.jsx)(n.li,{children:"Structured output generation"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"vectorstore-package",children:"Vectorstore Package"}),"\n",(0,t.jsx)(n.p,{children:"The vectorstore package provides vector database solutions and document processing."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pip install rakam-systems-vectorstore\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Minimum Specs:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"RAM"}),": 8 GB+ (embedding models are loaded into memory)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Disk"}),": 5 GB+ (for downloading model weights)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"GPU"}),": Optional but recommended for faster inference"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"PostgreSQL"}),": 12+ with pgvector extension (for persistent storage)"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Includes:"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Package"}),(0,t.jsx)(n.th,{children:"Purpose"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"sentence-transformers"})}),(0,t.jsx)(n.td,{children:"Local embedding models"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"huggingface-hub"})}),(0,t.jsx)(n.td,{children:"HuggingFace model authentication"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"faiss-cpu"})}),(0,t.jsx)(n.td,{children:"Vector similarity search"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"psycopg2-binary"})}),(0,t.jsx)(n.td,{children:"PostgreSQL driver"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"pgvector"})}),(0,t.jsx)(n.td,{children:"PostgreSQL vector extension"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"django"})}),(0,t.jsx)(n.td,{children:"ORM for database operations"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"torch"})}),(0,t.jsx)(n.td,{children:"Deep learning backend"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"pymupdf"})}),(0,t.jsx)(n.td,{children:"PDF processing"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"pymupdf4llm"})}),(0,t.jsx)(n.td,{children:"Lightweight PDF to markdown"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"python-docx"})}),(0,t.jsx)(n.td,{children:"DOCX processing"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"beautifulsoup4"})}),(0,t.jsx)(n.td,{children:"HTML parsing"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"chonkie"})}),(0,t.jsx)(n.td,{children:"Text chunking"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"docling"})}),(0,t.jsx)(n.td,{children:"Advanced document processing"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"openai"})}),(0,t.jsx)(n.td,{children:"OpenAI embeddings (optional)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"cohere"})}),(0,t.jsx)(n.td,{children:"Cohere embeddings (optional)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"odfpy"})}),(0,t.jsx)(n.td,{children:"ODT file processing"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"openpyxl"})}),(0,t.jsx)(n.td,{children:"Excel file processing"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"pandas"})}),(0,t.jsx)(n.td,{children:"Tabular data handling"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"joblib"})}),(0,t.jsx)(n.td,{children:"Parallel processing"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Semantic search applications"}),"\n",(0,t.jsx)(n.li,{children:"RAG (Retrieval-Augmented Generation)"}),"\n",(0,t.jsx)(n.li,{children:"Document Q&A systems"}),"\n",(0,t.jsx)(n.li,{children:"Knowledge base management"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"environment-setup",children:"Environment Setup"}),"\n",(0,t.jsx)(n.h3,{id:"start-the-evaluation-service-required-for-evaluation",children:"Start the Evaluation Service (required for evaluation)"}),"\n",(0,t.jsxs)(n.p,{children:["To launch all required backend services, run the following command (replace ",(0,t.jsx)(n.code,{children:"YOUR_API"})," with your actual OpenAI API key):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'docker run -d \\\n  --name eval-framework \\\n  -p 8080:8000 \\\n  -e OPENAI_API_KEY=YOUR_API \\\n  -e API_PREFIX="/eval-framework" \\\n  -e APP_NAME="eval-framework" \\\n  346k0827.c1.de1.container-registry.ovh.net/monitoring/evaluation-service:v0.2.4rc8\n'})}),"\n",(0,t.jsx)(n.h3,{id:"api-keys",children:"API Keys"}),"\n",(0,t.jsxs)(n.p,{children:["Create a ",(0,t.jsx)(n.code,{children:".env"})," file in your project root:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# OpenAI (for GPT models and embeddings)\nOPENAI_API_KEY=sk-your-openai-key\n\n# Mistral AI (for Mistral models)\nMISTRAL_API_KEY=your-mistral-key\n\n# Cohere (for Cohere embeddings)\nCOHERE_API_KEY=your-cohere-key\n\n# HuggingFace (for private/gated models)\nHUGGINGFACE_TOKEN=your-hf-token\n\n\n# These will come from previous step\nEVALFRAMEWORK_URL="http://eval-service-url.com" # url of docker container\nEVALFRAMEWORK_API_KEY="your-api-token" # can be generated from \'/docs\' swagger-ui\n'})}),"\n",(0,t.jsx)(n.p,{children:"Load in your code:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from dotenv import load_dotenv\nload_dotenv()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"postgresql-with-pgvector",children:"PostgreSQL with pgvector"}),"\n",(0,t.jsx)(n.h4,{id:"option-1-docker-recommended",children:"Option 1: Docker (Recommended)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run -d \\\n  --name postgres-vectorstore \\\n  -e POSTGRES_PASSWORD=postgres \\\n  -e POSTGRES_DB=vectorstore_db \\\n  -p 5432:5432 \\\n  pgvector/pgvector:pg16\n"})}),"\n",(0,t.jsx)(n.h4,{id:"option-2-docker-compose",children:"Option 2: Docker Compose"}),"\n",(0,t.jsxs)(n.p,{children:["Create ",(0,t.jsx)(n.code,{children:"docker-compose.yml"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'version: "3.8"\nservices:\n  postgres:\n    image: pgvector/pgvector:pg16\n    environment:\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: postgres\n      POSTGRES_DB: vectorstore_db\n    ports:\n      - "5432:5432"\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n\nvolumes:\n  postgres_data:\n'})}),"\n",(0,t.jsx)(n.p,{children:"Run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker compose up -d\n"})}),"\n",(0,t.jsx)(n.h4,{id:"environment-variables-for-postgresql",children:"Environment Variables for PostgreSQL"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"export POSTGRES_HOST=localhost\nexport POSTGRES_PORT=5432\nexport POSTGRES_DB=vectorstore_db\nexport POSTGRES_USER=postgres\nexport POSTGRES_PASSWORD=postgres\n"})}),"\n",(0,t.jsx)(n.h3,{id:"django-configuration",children:"Django Configuration"}),"\n",(0,t.jsx)(n.p,{children:"For PostgreSQL-backed vector stores, configure Django:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import os\nimport django\nfrom django.conf import settings\n\nif not settings.configured:\n    settings.configure(\n        INSTALLED_APPS=[\n            'django.contrib.contenttypes',\n            'rakam_systems_vectorstore.components.vectorstore',\n        ],\n        DATABASES={\n            'default': {\n                'ENGINE': 'django.db.backends.postgresql',\n                'NAME': os.getenv('POSTGRES_DB', 'vectorstore_db'),\n                'USER': os.getenv('POSTGRES_USER', 'postgres'),\n                'PASSWORD': os.getenv('POSTGRES_PASSWORD', 'postgres'),\n                'HOST': os.getenv('POSTGRES_HOST', 'localhost'),\n                'PORT': os.getenv('POSTGRES_PORT', '5432'),\n            }\n        },\n        DEFAULT_AUTO_FIELD='django.db.models.BigAutoField',\n    )\n    django.setup()\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"agents",children:"Agents"}),"\n",(0,t.jsx)(n.h3,{id:"basic-agent",children:"Basic Agent"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import asyncio\nfrom dotenv import load_dotenv\nload_dotenv()\n\nfrom rakam_systems_agent import BaseAgent\n\nasync def main():\n    agent = BaseAgent(\n        name="my_assistant",\n        model="openai:gpt-4o",\n        system_prompt="You are a helpful assistant."\n    )\n    result = await agent.arun("What is Python?")\n    print(result.output_text)\n\nasyncio.run(main())\n'})}),"\n",(0,t.jsx)(n.h3,{id:"with-streaming",children:"With Streaming"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'async def main():\n    agent = BaseAgent(name="stream_agent", model="openai:gpt-4o")\n\n    print("Response: ", end="", flush=True)\n    async for chunk in agent.astream("Tell me a short story."):\n        print(chunk, end="", flush=True)\n    print()\n\nasyncio.run(main())\n'})}),"\n",(0,t.jsx)(n.h3,{id:"with-custom-settings",children:"With Custom Settings"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from rakam_systems_core.interfaces import ModelSettings\n\nagent = BaseAgent(\n    name="creative",\n    model="openai:gpt-4o",\n    system_prompt="You are a creative writer."\n)\nresult = await agent.arun(\n    "Write a haiku about programming.",\n    model_settings=ModelSettings(temperature=0.9, max_tokens=100)\n)\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"with-tools",children:"With Tools"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import asyncio\nfrom rakam_systems_agent import BaseAgent\nfrom rakam_systems_core.interfaces.tool import ToolComponent\n\ndef get_weather(city: str) -> str:\n    """Get weather for a city."""\n    return f"Weather in {city}: 22\xb0C, Sunny"\n\n# Create tool from function\nweather_tool = ToolComponent.from_function(\n    function=get_weather,\n    name="get_weather",\n    description="Get current weather for a city",\n    json_schema={\n        "type": "object",\n        "properties": {"city": {"type": "string", "description": "City name"}},\n        "required": ["city"]\n    }\n)\n\nasync def main():\n    agent = BaseAgent(\n        name="tool_agent",\n        model="openai:gpt-4o",\n        tools=[weather_tool]\n    )\n    result = await agent.arun("What\'s the weather in Paris?")\n    print(result.output_text)\n\nasyncio.run(main())\n'})}),"\n",(0,t.jsx)(n.h3,{id:"structured-output",children:"Structured Output"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import asyncio\nfrom pydantic import BaseModel, Field\nfrom rakam_systems_agent import BaseAgent\n\nclass MovieReview(BaseModel):\n    title: str = Field(description="Movie title")\n    rating: float = Field(ge=0, le=10)\n    summary: str = Field(description="Brief summary")\n    recommended: bool\n\nasync def main():\n    agent = BaseAgent(\n        name="critic",\n        model="openai:gpt-4o",\n        output_type=MovieReview\n    )\n    result = await agent.arun("Review the movie \'Inception\'")\n\n    review: MovieReview = result.output\n    print(f"Rating: {review.rating}/10")\n    print(f"Recommended: {\'Yes\' if review.recommended else \'No\'}")\n\nasyncio.run(main())\n'})}),"\n",(0,t.jsx)(n.h3,{id:"chat-history",children:"Chat History"}),"\n",(0,t.jsx)(n.p,{children:"Choose the right backend for your needs:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Backend"}),(0,t.jsx)(n.th,{children:"Use Case"}),(0,t.jsx)(n.th,{children:"Quick Setup"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"JSON"})}),(0,t.jsx)(n.td,{children:"Prototyping"}),(0,t.jsx)(n.td,{children:"File-based, no setup"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"SQLite"})}),(0,t.jsx)(n.td,{children:"Local dev"}),(0,t.jsx)(n.td,{children:"Single file, no server"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"PostgreSQL"})}),(0,t.jsx)(n.td,{children:"Production"}),(0,t.jsx)(n.td,{children:"Scalable, concurrent"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"JSON (simplest):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import asyncio\nfrom rakam_systems_agent import BaseAgent\nfrom rakam_systems_agent.components.chat_history import JSONChatHistory\n\nasync def main():\n    history = JSONChatHistory(config={"storage_path": "./chat.json"})\n    agent = BaseAgent(name="chatty", model="openai:gpt-4o")\n\n    chat_id = "user_123"\n\n    # First message\n    messages = history.get_message_history(chat_id)\n    result = await agent.arun("My name is Alice!", message_history=messages)\n    history.save_messages(chat_id, result.all_messages())\n\n    # Second message (remembers context)\n    messages = history.get_message_history(chat_id)\n    result = await agent.arun("What\'s my name?", message_history=messages)\n    print(result.output_text)  # "Your name is Alice!"\n\nasyncio.run(main())\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"PostgreSQL (production):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"# Uses environment variables: POSTGRES_HOST, POSTGRES_PORT, POSTGRES_DB, etc.\nhistory = PostgresChatHistory()  # No config needed if env vars set\n"})}),"\n",(0,t.jsx)(n.h2,{id:"vector-store",children:"Vector Store"}),"\n",(0,t.jsx)(n.h3,{id:"faiss-in-memory-for-development",children:"FAISS (in-memory, for development)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from rakam_systems_vectorstore import FaissStore, Node, NodeMetadata\n\nstore = FaissStore(\n    name="my_store",\n    base_index_path="./indexes",\n    embedding_model="Snowflake/snowflake-arctic-embed-m",\n    initialising=True\n)\n\n# Add documents\nnodes = [\n    Node(content="Python is a programming language.",\n         metadata=NodeMetadata(source_file_uuid="doc1", position=0)),\n    Node(content="Machine learning is AI subset.",\n         metadata=NodeMetadata(source_file_uuid="doc1", position=1)),\n]\nstore.create_collection_from_nodes("docs", nodes)\n\n# Search\nresults, _ = store.search(collection_name="docs", query="What is Python?", number=3)\nfor _, (_, content, dist) in results.items():\n    print(f"[{dist:.4f}] {content}")\n'})}),"\n",(0,t.jsx)(n.h3,{id:"postgresql-production",children:"PostgreSQL (production)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# Requires: pip install rakam-systems-vectorstore[all]\n# Requires: PostgreSQL with pgvector extension\n\nfrom rakam_systems_vectorstore import ConfigurablePgVectorStore, VectorStoreConfig\n\nconfig = VectorStoreConfig(\n    name="prod_store",\n    embedding={"model_type": "sentence_transformer", "model_name": "Snowflake/snowflake-arctic-embed-m"}\n)\n# Database config via environment variables (POSTGRES_HOST, etc.)\n\nstore = ConfigurablePgVectorStore(config=config)\nstore.setup()\n# ... use store ...\nstore.shutdown()\n'})}),"\n",(0,t.jsx)(n.h2,{id:"rag-pipeline",children:"RAG Pipeline"}),"\n",(0,t.jsx)(n.p,{children:"Combine agents + vector store for question-answering over your documents:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import asyncio\nfrom rakam_systems_agent import BaseAgent\nfrom rakam_systems_vectorstore import FaissStore, Node, NodeMetadata\nfrom rakam_systems_core.interfaces.tool import ToolComponent\n\n# 1. Create vector store with your documents\nstore = FaissStore(name="kb", base_index_path="./kb_index",\n                   embedding_model="Snowflake/snowflake-arctic-embed-m", initialising=True)\n\nkb_nodes = [\n    Node(content="Our company was founded in 2020.", metadata=NodeMetadata(source_file_uuid="info", position=0)),\n    Node(content="We offer AI Assistant at $99/month.", metadata=NodeMetadata(source_file_uuid="info", position=1)),\n]\nstore.create_collection_from_nodes("knowledge", kb_nodes)\n\n# 2. Create search tool\ndef search_kb(query: str) -> str:\n    results, _ = store.search(collection_name="knowledge", query=query, number=3)\n    return "\\n".join([content for _, (_, content, _) in results.items()])\n\nsearch_tool = ToolComponent.from_function(\n    function=search_kb, name="search_kb",\n    description="Search company knowledge base",\n    json_schema={\n        "type": "object",\n        "properties": {"query": {"type": "string"}},\n        "required": ["query"]\n    }\n)\n\n# 3. Create RAG agent\nasync def main():\n    agent = BaseAgent(\n        name="rag_agent",\n        model="openai:gpt-4o",\n        system_prompt="Use search_kb tool to find information. Answer based on retrieved docs.",\n        tools=[search_tool]\n    )\n\n    result = await agent.arun("How much does your product cost?")\n    print(result.output_text)  # "$99/month"\n\nasyncio.run(main())\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"agent-with-configuration-yaml",children:"Agent with Configuration (YAML)"}),"\n",(0,t.jsx)(n.p,{children:"Create agents from config files - no code changes needed to switch models/prompts:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:[(0,t.jsx)(n.code,{children:"config/agent.yaml"}),":"]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'version: "1.0"\n\nagents:\n  assistant:\n    name: "assistant"\n    llm_config:\n      model: "openai:gpt-4o"\n      temperature: 0.7\n    system_prompt: "You are a helpful assistant."\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Use in code:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import asyncio\nfrom rakam_systems_core.config_loader import ConfigurationLoader\n\nloader = ConfigurationLoader()\nconfig = loader.load_from_yaml("config/agent.yaml")\nagent = loader.create_agent("assistant", config)\n\nasyncio.run(lambda: agent.arun("Hello!"))\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"write-evaluation-function",children:"Write Evaluation Function"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Create an ",(0,t.jsx)(n.code,{children:"eval/"})," directory in your project if it doesn't exist."]}),"\n",(0,t.jsxs)(n.li,{children:["Add your evaluation functions there. Each function must:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Be decorated with ",(0,t.jsx)(n.code,{children:"@eval_run"})]}),"\n",(0,t.jsxs)(n.li,{children:["Return an ",(0,t.jsx)(n.code,{children:"EvalConfig"})," or ",(0,t.jsx)(n.code,{children:"SchemaEvalConfig"})," object"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# eval/examples.py\nfrom rakam_systems_cli.decorators import eval_run\nfrom rakam_systems_tools.evaluation.schema import (\n    EvalConfig,\n    TextInputItem,\n    ClientSideMetricConfig,\n    ToxicityConfig,\n)\n\n@eval_run\ndef test_simple_text_eval():\n    """A simple text evaluation showcasing a basic client-side metric."""\n    return EvalConfig(\n        component="text_component_1",\n        label="demo_simple_text",\n        data=[\n            TextInputItem(\n                id="txt_001",\n                input="Hello world", # input from ai component e.g. system_prompt or user_prompt\n                output="Hello world", # output from ai component e.g. agent response\n                expected_output="Hello world", # excpected  results (optional, depends on metrics requested)\n                metrics=[ClientSideMetricConfig(name="relevance", score=1)],\n            )\n        ],\n        metrics=[ToxicityConfig(name="toxicity_demo", include_reason=False)],\n    )\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"run-your-evaluation",children:"Run Your Evaluation"}),"\n",(0,t.jsx)(n.p,{children:"From your project root to run evaluation functions, run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"rakam eval run\n"})}),"\n",(0,t.jsx)(n.p,{children:"To List runs:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"rakam eval list runs\n\n"})}),"\n",(0,t.jsx)(n.p,{children:"To View latest results:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"rakam eval show\n"})}),"\n",(0,t.jsx)(n.p,{children:"Compare two runs to see what changed:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Compare by IDs\nrakam eval compare --id 42 --id 45\n\n# Save comparison to file\nrakam eval compare  --id 42 --id 45 -o comparison.json\n\n"})}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,t.jsx)(n.h4,{id:"1-modulenotfounderror",children:"1. ModuleNotFoundError"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"ModuleNotFoundError: No module named 'rakam_systems'\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution:"})," Make sure that rakam-system package got installed correctly:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pip install rakam-systems\n"})}),"\n",(0,t.jsx)(n.h4,{id:"2-missing-optional-dependencies",children:"2. Missing Optional Dependencies"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"ImportError: cannot import name 'BaseAgent' from 'rakam_systems_agent'\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution:"})," Install the required module:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pip install rakam-systems-agent\n"})}),"\n",(0,t.jsx)(n.h4,{id:"3-django-not-configured",children:"3. Django Not Configured"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"django.core.exceptions.ImproperlyConfigured: Requested setting INSTALLED_APPS...\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution:"})," Configure Django before importing Django-dependent components:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import django\nfrom django.conf import settings\n\nsettings.configure(\n    INSTALLED_APPS=['rakam_systems_vectorstore.components.vectorstore'],\n    DATABASES={'default': {...}}\n)\ndjango.setup()\n\n# Now import Django-dependent components\nfrom rakam_systems_vectorstore import ConfigurablePgVectorStore\n"})}),"\n",(0,t.jsx)(n.h4,{id:"4-pytorch-installation-issues",children:"4. PyTorch Installation Issues"}),"\n",(0,t.jsx)(n.p,{children:"PyTorch is large (~2GB). For CPU-only installation:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pip install torch --index-url https://download.pytorch.org/whl/cpu\n"})}),"\n",(0,t.jsx)(n.p,{children:"For CUDA support:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pip install torch --index-url https://download.pytorch.org/whl/cu118\n"})}),"\n",(0,t.jsx)(n.h4,{id:"5-faiss-gpu-support",children:"5. FAISS GPU Support"}),"\n",(0,t.jsx)(n.p,{children:"Replace CPU version with GPU version:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pip uninstall faiss-cpu\npip install faiss-gpu\n"})}),"\n",(0,t.jsx)(n.h4,{id:"6-libmagic-not-found",children:"6. libmagic Not Found"}),"\n",(0,t.jsx)(n.p,{children:"On macOS:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"brew install libmagic\n"})}),"\n",(0,t.jsx)(n.p,{children:"On Ubuntu/Debian:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"apt-get install libmagic1\n"})}),"\n",(0,t.jsx)(n.p,{children:"On Windows:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pip install python-magic-bin\n"})}),"\n",(0,t.jsx)(n.h4,{id:"7-postgresql-connection-refused",children:"7. PostgreSQL Connection Refused"}),"\n",(0,t.jsx)(n.p,{children:"Ensure PostgreSQL is running:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Check if running\ndocker ps | grep postgres\n\n# Start if not running\ndocker start postgres-vectorstore\n\n# Or start with docker compose\ndocker compose up -d postgres\n"})}),"\n",(0,t.jsx)(n.h3,{id:"verification",children:"Verification"}),"\n",(0,t.jsx)(n.h4,{id:"verify-core-installation",children:"Verify Core Installation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# Test core imports\nfrom rakam_systems_core.base import BaseComponent\nfrom rakam_systems_core.interfaces import ToolComponent, VectorStore\nprint("\u2705 Core installed successfully!")\n'})}),"\n",(0,t.jsx)(n.h4,{id:"verify-ai-agents",children:"Verify AI Agents"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'try:\n    from rakam_systems_agent import BaseAgent\n    from rakam_systems_core.interfaces.agent import AgentInput, AgentOutput\n    print("\u2705 AI Agents installed successfully!")\nexcept ImportError as e:\n    print(f"\u274c AI Agents not installed: {e}")\n'})}),"\n",(0,t.jsx)(n.h4,{id:"verify-ai-vectorstore",children:"Verify AI Vectorstore"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'try:\n    from rakam_systems_vectorstore import (\n        VectorStoreConfig,\n        Node,\n        VSFile,\n        ConfigurableEmbeddings\n    )\n    print("\u2705 AI Vectorstore installed successfully!")\nexcept ImportError as e:\n    print(f"\u274c AI Vectorstore not installed: {e}")\n'})}),"\n",(0,t.jsx)(n.h4,{id:"verify-llm-gateway",children:"Verify LLM Gateway"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'try:\n    from rakam_systems_agent.components.llm_gateway import (\n        OpenAIGateway,\n        MistralGateway,\n        LLMGatewayFactory\n    )\n    print("\u2705 LLM Gateway installed successfully!")\nexcept ImportError as e:\n    print(f"\u274c LLM Gateway not installed: {e}")\n'})}),"\n",(0,t.jsx)(n.h3,{id:"getting-help",children:"Getting Help"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Documentation"}),": See ",(0,t.jsx)(n.code,{children:"docs/"})," directory"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Issues"}),": ",(0,t.jsx)(n.a,{href:"https://github.com/Rakam-AI/rakam_systems/issues",children:"GitHub Issues"})]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>o,x:()=>a});var r=s(6540);const t={},i=r.createContext(t);function o(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);